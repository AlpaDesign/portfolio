<pre class="code_text"><span class="num">1</span><span class="text"><span class="gray">//공지사항 업로드
</span></span></pre>
<pre class="code_text"><span class="num">2</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">3</span><span class="text"><span class="puple"><span class="blue">var</span> sel_files =</span> new Array<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">4</span><span class="text"><span class="puple"><span class="blue">var</span> n=</span>0;
</span></pre>
<pre class="code_text"><span class="num">5</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">6</span><span class="text">$<span class="white">(</span>document).ready<span class="white">(</span><span class="blue">function</span><span class="white">(</span>) <span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">7</span><span class="text">    $<span class="white">(</span><span class="orange">"#product_img"</span>)<span class="puple">.on</span><span class="white">(</span><span class="orange">"change"</span>, img_handler);
</span></pre>
<pre class="code_text"><span class="num">8</span><span class="text">    
</span></pre>
<pre class="code_text"><span class="num">9</span><span class="text">    $<span class="white">(</span><span class="orange">".check_box2"</span>)<span class="puple">.click</span><span class="white">(</span><span class="blue">function</span><span class="white">(</span>e)<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">10</span><span class="text">        e<span class="puple">.preventDefault</span><span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">11</span><span class="text">        <span class="blue">if<span class="white">(</span></span>$<span class="white">(</span><span class="blue">this</span>)<span class="puple">.hasClass</span><span class="white">(</span><span class="orange">"checked"</span>) == <span class="orange">false</span>)<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">12</span><span class="text">            $<span class="white">(</span><span class="orange">".check_box2"</span>)<span class="puple">.removeClass</span><span class="white">(</span><span class="orange">"checked"</span>);
</span></pre>
<pre class="code_text"><span class="num">13</span><span class="text">            $<span class="white">(</span><span class="orange">".check_box2"</span>).next<span class="white">(</span><span class="orange">"input"</span>).prop<span class="white">(</span><span class="orange">"checked"</span>, <span class="orange">false</span>);
</span></pre>
<pre class="code_text"><span class="num">14</span><span class="text">            $<span class="white">(</span><span class="blue">this</span>)<span class="puple">.addClass</span><span class="white">(</span><span class="orange">"checked"</span>);
</span></pre>
<pre class="code_text"><span class="num">15</span><span class="text">            $<span class="white">(</span><span class="blue">this</span>).next<span class="white">(</span><span class="orange">"input"</span>).prop<span class="white">(</span><span class="orange">"checked"</span>, <span class="orange">true</span>);
</span></pre>
<pre class="code_text"><span class="num">16</span><span class="text">        }<span class="blue">else</span><span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">17</span><span class="text">            $<span class="white">(</span><span class="blue">this</span>)<span class="puple">.removeClass</span><span class="white">(</span><span class="orange">"checked"</span>);
</span></pre>
<pre class="code_text"><span class="num">18</span><span class="text">            $<span class="white">(</span><span class="blue">this</span>).next<span class="white">(</span><span class="orange">"input"</span>).prop<span class="white">(</span><span class="orange">"checked"</span>, <span class="orange">false</span>);
</span></pre>
<pre class="code_text"><span class="num">19</span><span class="text">        }
</span></pre>
<pre class="code_text"><span class="num">20</span><span class="text">    });
</span></pre>
<pre class="code_text"><span class="num">21</span><span class="text">    <span class="puple"><span class="blue">var</span> idx=</span>$<span class="white">(</span><span class="orange">"#idxs"</span>).val<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">22</span><span class="text">});
</span></pre>
<pre class="code_text"><span class="num">23</span><span class="text"><span class="blue">function</span> img_handler<span class="white">(</span>e)<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">24</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">25</span><span class="text">    <span class="puple"><span class="blue">var</span> files =</span> e.target.files;
</span></pre>
<pre class="code_text"><span class="num">26</span><span class="text">    <span class="puple"><span class="blue">var</span> filesArr =</span> Array.prototype.slice.call<span class="white">(</span>files);
</span></pre>
<pre class="code_text"><span class="num">27</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">28</span><span class="text">    filesArr.<span class="blue">for</span>Each<span class="white">(</span><span class="blue">function</span><span class="white">(</span>file) <span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">29</span><span class="text">        <span class="blue">if<span class="white">(</span></span>!file.type.match<span class="white">(</span><span class="orange">"image.*"</span>))
</span></pre>
<pre class="code_text"><span class="num">30</span><span class="text">		<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">31</span><span class="text">            alert<span class="white">(</span><span class="orange">"확장자는 이미지 파일만 가능합니다."</span>);
</span></pre>
<pre class="code_text"><span class="num">32</span><span class="text">            return;
</span></pre>
<pre class="code_text"><span class="num">33</span><span class="text">        }
</span></pre>
<pre class="code_text"><span class="num">34</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">35</span><span class="text">        <span class="puple"><span class="blue">var</span> f_reader =</span> new FileReader<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">36</span><span class="text">    	<span class="puple"><span class="blue">var</span> index =</span> sel_files.length;
</span></pre>
<pre class="code_text"><span class="num">37</span><span class="text">        f_reader<span class="puple">.on</span>load = <span class="blue">function</span><span class="white">(</span>e) <span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">38</span><span class="text">			<span class="puple"><span class="blue">var</span> delete_html =</span>  <span class="orange">"<span class="orange">&lt;li class=<span class="orange">'imageList'</span> <span class="puple">id=</span><span class="orange">'Lists"</span>+index+<span class="orange">"'</span>&gt;</span>"</span>+
</span></pre>
<pre class="code_text"><span class="num">39</span><span class="text">                                <span class="orange">"<span class="orange">&lt;div class=\"</span>wrap_div_img\<span class="orange">" <span class="orange">id=</span>\"</span>img_id_<span class="orange">"+index+"</span>\<span class="orange">" style=\"</span>display: inline-block\<span class="orange">"&gt;</span>"</span> +
</span></pre>
<pre class="code_text"><span class="num">40</span><span class="text">								<span class="orange">"<span class="orange">&lt;button type=\"</span>button\<span class="orange">" class=\"</span>close AClass\<span class="orange">" style=<span class="orange">'padding:0;'</span> value=<span class="orange">'삭제'</span> <span class="orange">onclick=</span>\"</span>delete_images<span class="orange">(</span><span class="orange">"+index+"</span>)\<span class="orange">"&gt;</span><span class="orange">&lt;span&gt;</span><span class="orange">&lt;i class=\"</span>fa fa-times-circle-o\<span class="orange">" aria-hidden=\"</span><span class="orange">true</span>\<span class="orange">"&gt;</span>x<span class="orange">&lt;/i&gt;</span><span class="orange">&lt;/span&gt;</span><span class="orange">&lt;/button&gt;</span>"</span>+
</span></pre>
<pre class="code_text"><span class="num">41</span><span class="text">		   						<span class="orange">"<span class="orange">&lt;img <span class="puple">src=</span>\"</span><span class="orange">" + e.target.result + "</span>\<span class="orange">" style=<span class="orange">'width:40px; height:40px;'</span> <span class="orange">name=</span><span class="orange">'imgs'</span>&gt;</span><span class="orange">&lt;/a&gt;</span>"</span>+
</span></pre>
<pre class="code_text"><span class="num">42</span><span class="text">								<span class="orange">"<span class="orange">&lt;/div&gt;</span>"</span>+
</span></pre>
<pre class="code_text"><span class="num">43</span><span class="text">                                <span class="orange">"<span class="orange">&lt;/li&gt;</span>"</span>;
</span></pre>
<pre class="code_text"><span class="num">44</span><span class="text">            $<span class="white">(</span><span class="orange">".img_box ul"</span>).append<span class="white">(</span>delete_html);
</span></pre>
<pre class="code_text"><span class="num">45</span><span class="text">			<span class="gray">//$<span class="gray">(</span><span class="gray">".imgs_wrap_h2"</span>).remove<span class="gray">(</span>);
</span></span></pre>
<pre class="code_text"><span class="num">46</span><span class="text">			$<span class="white">(</span><span class="orange">".imgs_wrap"</span>)<span class="puple">.css</span><span class="white">(</span><span class="orange">"text-align"</span>, <span class="orange">""</span>);
</span></pre>
<pre class="code_text"><span class="num">47</span><span class="text">            <span class="blue">if<span class="white">(</span></span>sel_files.length &gt; 4)<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">48</span><span class="text">                alert<span class="white">(</span><span class="orange">"이미지 업로드 숫자 초과!"</span>);
</span></pre>
<pre class="code_text"><span class="num">49</span><span class="text">                $<span class="white">(</span><span class="orange">"#Lists"</span>+index).remove<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">50</span><span class="text">            }
</span></pre>
<pre class="code_text"><span class="num">51</span><span class="text">            
</span></pre>
<pre class="code_text"><span class="num">52</span><span class="text">        }
</span></pre>
<pre class="code_text"><span class="num">53</span><span class="text">        
</span></pre>
<pre class="code_text"><span class="num">54</span><span class="text">        sel_files.push<span class="white">(</span>file);
</span></pre>
<pre class="code_text"><span class="num">55</span><span class="text">        f_reader.readAsDataURL<span class="white">(</span>file);
</span></pre>
<pre class="code_text"><span class="num">56</span><span class="text">        
</span></pre>
<pre class="code_text"><span class="num">57</span><span class="text">    });
</span></pre>
<pre class="code_text"><span class="num">58</span><span class="text">    
</span></pre>
<pre class="code_text"><span class="num">59</span><span class="text">}
</span></pre>
<pre class="code_text"><span class="num">60</span><span class="text"><span class="blue">function</span> delete_edit<span class="white">(</span>)<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">61</span><span class="text">    $<span class="white">(</span><span class="orange">".imageList"</span>).remove<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">62</span><span class="text">    $<span class="white">(</span><span class="orange">".img_edit .edit"</span>)<span class="puple">.addClass</span><span class="white">(</span><span class="orange">"active"</span>);
</span></pre>
<pre class="code_text"><span class="num">63</span><span class="text">    $<span class="white">(</span><span class="orange">".content2 .img_search a"</span>)<span class="puple">.addClass</span><span class="white">(</span><span class="orange">"active"</span>);
</span></pre>
<pre class="code_text"><span class="num">64</span><span class="text">    $<span class="white">(</span><span class="orange">"#cehckSrc"</span>).val<span class="white">(</span><span class="orange">"1"</span>);
</span></pre>
<pre class="code_text"><span class="num">65</span><span class="text">}
</span></pre>
<pre class="code_text"><span class="num">66</span><span class="text"><span class="blue">function</span> delete_images<span class="white">(</span>)<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">67</span><span class="text">    $<span class="white">(</span><span class="orange">".imageList"</span>).remove<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">68</span><span class="text">}
</span></pre>
<pre class="code_text"><span class="num">69</span><span class="text"><span class="blue">function</span> img_upload<span class="white">(</span>)<span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">70</span><span class="text">    $<span class="white">(</span><span class="orange">"#product_img"</span>)<span class="puple">.trigger</span><span class="white">(</span><span class="orange">'click'</span>);
</span></pre>
<pre class="code_text"><span class="num">71</span><span class="text">}
</span></pre>
<pre class="code_text"><span class="num">72</span><span class="text"><span class="blue">function</span> img_submit<span class="white">(</span>get) <span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">73</span><span class="text">        <span class="puple"><span class="blue">var</span> userId =</span> $<span class="white">(</span><span class="orange">"#checkH2"</span>).val<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">74</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">75</span><span class="text">        <span class="puple"><span class="blue">var</span> checkboxValues =</span> [];
</span></pre>
<pre class="code_text"><span class="num">76</span><span class="text">        $<span class="white">(</span><span class="orange">"input[<span class="orange">name=</span><span class="orange">'check'</span>]:checked"</span>).each<span class="white">(</span><span class="blue">function</span><span class="white">(</span>i) <span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">77</span><span class="text">           checkboxValues.push<span class="white">(</span>$<span class="white">(</span><span class="blue">this</span>).val<span class="white">(</span>));
</span></pre>
<pre class="code_text"><span class="num">78</span><span class="text">        });
</span></pre>
<pre class="code_text"><span class="num">79</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">80</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">81</span><span class="text">        <span class="puple"><span class="blue">var</span> allData =</span> <span class="white">{</span> <span class="orange">"userId"</span>: userId, <span class="orange">"checkArray"</span>: checkbox2Values };
</span></pre>
<pre class="code_text"><span class="num">82</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">83</span><span class="text">        <span class="puple"><span class="blue">var</span> data =</span> new FormData<span class="white">(</span>);
</span></pre>
<pre class="code_text"><span class="num">84</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">85</span><span class="text">        <span class="blue">for</span><span class="white">(</span><span class="puple"><span class="blue">var</span> i=</span>0; i&lt;sel_files.length; i++) <span class="white">{</span>	
</span></pre>
<pre class="code_text"><span class="num">86</span><span class="text">            <span class="puple"><span class="blue">var</span> name =</span> i;
</span></pre>
<pre class="code_text"><span class="num">87</span><span class="text">            data.append<span class="white">(</span>name, sel_files[i]);
</span></pre>
<pre class="code_text"><span class="num">88</span><span class="text">        }
</span></pre>
<pre class="code_text"><span class="num">89</span><span class="text">        data.append<span class="white">(</span><span class="orange">"image_count"</span>, sel_files.length);
</span></pre>
<pre class="code_text"><span class="num">90</span><span class="text">        data.append<span class="white">(</span><span class="orange">"title"</span>, $<span class="white">(</span><span class="orange">'#title'</span>).val<span class="white">(</span>));
</span></pre>
<pre class="code_text"><span class="num">91</span><span class="text">        data.append<span class="white">(</span><span class="orange">"content"</span>, $<span class="white">(</span><span class="orange">'#contents'</span>).val<span class="white">(</span>));
</span></pre>
<pre class="code_text"><span class="num">92</span><span class="text">        data.append<span class="white">(</span><span class="orange">"check"</span>, checkboxValues);
</span></pre>
<pre class="code_text"><span class="num">93</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">94</span><span class="text">
</span></pre>
<pre class="code_text"><span class="num">95</span><span class="text">        $.ajax<span class="white">(</span><span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">96</span><span class="text">            url: <span class="orange">"notice.php"</span>,
</span></pre>
<pre class="code_text"><span class="num">97</span><span class="text">            type: get,
</span></pre>
<pre class="code_text"><span class="num">98</span><span class="text">            enctype: <span class="orange">'multipart/<span class="orange">for</span>m-data'</span>, 
</span></pre>
<pre class="code_text"><span class="num">99</span><span class="text">            data: data,
</span></pre>
<pre class="code_text"><span class="num">100</span><span class="text">            dataType:<span class="orange">"script"</span>,
</span></pre>
<pre class="code_text"><span class="num">101</span><span class="text">            cache: <span class="orange">false</span>,
</span></pre>
<pre class="code_text"><span class="num">102</span><span class="text">            contentType: <span class="orange">false</span>,
</span></pre>
<pre class="code_text"><span class="num">103</span><span class="text">            processData: <span class="orange">false</span>,
</span></pre>
<pre class="code_text"><span class="num">104</span><span class="text">            success: <span class="blue">function</span> <span class="white">(</span>response) <span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">105</span><span class="text">                alert<span class="white">(</span><span class="orange">"업로드완료!"</span>);
</span></pre>
<pre class="code_text"><span class="num">106</span><span class="text">                location.<span class="puple">href=</span><span class="orange">"index.php"</span>;
</span></pre>
<pre class="code_text"><span class="num">107</span><span class="text">            },
</span></pre>
<pre class="code_text"><span class="num">108</span><span class="text">            error: <span class="blue">function</span> <span class="white">(</span>request, error) <span class="white">{</span>
</span></pre>
<pre class="code_text"><span class="num">109</span><span class="text">                alert<span class="white">(</span>request.responseText);
</span></pre>
<pre class="code_text"><span class="num">110</span><span class="text">            }
</span></pre>
<pre class="code_text"><span class="num">111</span><span class="text">        });
</span></pre>
<pre class="code_text"><span class="num">112</span><span class="text">}
</span></pre>
<pre class="code_text"><span class="num">113</span><span class="text">
</span></pre>