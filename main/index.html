<!DOCTYPE html>
<html>
<head>
    <!--
    안녕하세요?
    활동명 AlpaDesign 장윤수입니다.
    사용 라이브러리 = jQuery, bootstrap icon
    직접 제작한 라이브러리 = AlpaProgress.js, AlpaDeskTop.js
    
    -->
    <title>장윤수portfolio</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/AlpaDeskTop.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <script src="../js/script.js"></script>
    <script src="./AlpaDeskTop.js"></script>
    <!-- <script src="./deskTop_back.js"></script> -->
    <script src="../lib/AlpaProgress/js/AlpaProgress.js"></script>
    
</head>
<style>

.bg-rotator{
  position:relative; width:100%; height:60vh;
  overflow:hidden; background:#000;
}
.bg-rotator .layer{
  position:absolute; inset:0;
  background-position:center;
  background-size:cover;
  background-repeat:no-repeat;
  z-index:-1;
  opacity:0; transition:opacity 800ms ease;
}
.backs.active{
    display: block;
}
.backs{
    position: absolute;
    left: 0;
    top:0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    display: none;
    cursor: pointer;
}
.backs .backs_cover{
    display: flex;
    justify-content: center;
    width: 100%;
    height: 100%;
    align-items: center;
}
.backs .backs_cover p {
    text-align: center;
    color: #fff;
    font-size: 22px;
}
i.bi.bi-windows{
    font-size: 31px;
}
.window_proccess_start{
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    width: 55px;
    height: 48px;
    color: white;
    border: 1px solid transparent;
    transition: all 100ms;
    cursor: pointer;
}
.alpaka-proccess_box:hover{
    background-color: rgba(255,255,255,.1);
}
</style>
<body>
<div class="wrapper">
    <section>
        <div class="container">
            <div class="container_inner">
                <div class="start-menu start-menu--open" style="display: flex;">
                <div class="start-menu__list">
                <div class="media">
                    <a class="user-info" href="#">
                    <img class="user-info__img media__img" src="/images/alpaka.png" alt="User image" />
                    <div class="user-info__name media__body">
                    Alpa장윤수
                    </div>
                    </a>
                    <a class="user-info__power" href="#">
                    <i class="fa fa-power-off"></i>
                    </a>
                </div>
                

                <ul class="start-menu__recent" id="file_recent">
                    <!-- <li class="start-menu__explorer">
                    <a href="#" data-window="explorer">
                        <i class="fa fa-folder"></i>
                        File Explorer
                    </a>
                    </li>
                    <li class="start-menu__mail">
                    <a href="#" data-window="mail">
                        <i class="fa fa-envelope"></i>
                        Mail
                    </a>
                    </li>
                    <li class="start-menu__notepad">
                    <a href="#" data-window="notepad">
                        <i class="fa fa-pencil"></i>
                        Notepad
                    </a>
                    </li>
                    <li class="start-menu__explorer">
                    <a href="#">
                        <i class="fa fa-folder"></i>
                        File Explorer
                    </a>
                    </li>
                    <li class="start-menu__mail">
                    <a href="#">
                        <i class="fa fa-envelope"></i>
                        Mail
                    </a>
                    </li>
                    <li class="start-menu__notepad">
                    <a href="#">
                        <i class="fa fa-pencil"></i>
                        Notepad
                    </a>
                    </li> -->
                </ul>
                
                <a class="all-apps" href="#">
                    <div class="power" title="로그아웃" onclick="logout()">
                        <i class="bi bi-power"></i>
                    </div>
                </a>
                
                <input type="text" class="search" placeholder="Search files and folders">
                </div>
                <!-- <div class="start-screen-scroll">
                <div class="start-screen" style="position: relative; height: 512px;">
                <a class="start-screen__tile start-screen__tile--explorer masonry-item" href="#" style="position: absolute; left: 0px; top: 0px;">
                    <i class="fa fa-folder"></i>
                    <span>File Explorer</span>
                </a>
                <a class="start-screen__tile masonry-item" href="#" style="position: absolute; left: 128px; top: 0px;">
                </a>
                <a class="start-screen__tile start-screen__tile--wide masonry-item" href="#" data-ss-colspan="2" style="position: absolute; left: 256px; top: 0px;">
                </a>
                <div class="start-screen__smallgroup masonry-item" style="position: absolute; left: 0px; top: 128px;">
                <a class="start-screen__tile start-screen__tile--small" href="#"></a>
                    <a class="start-screen__tile start-screen__tile--small" href="#"></a>
                    <a class="start-screen__tile start-screen__tile--small" href="#"></a>
                </div>
                <a class="start-screen__tile masonry-item" href="#" style="position: absolute; left: 128px; top: 128px;">
                </a>
                <a class="start-screen__tile masonry-item" href="#" style="position: absolute; left: 256px; top: 128px;">
                </a>
                <a class="start-screen__tile start-screen__tile--notepad masonry-item" href="#" style="position: absolute; left: 384px; top: 128px;">
                </a>
                <a class="start-screen__tile start-screen__tile--large start-screen__tile--mail masonry-item" href="#" data-ss-colspan="2" style="position: absolute; left: 0px; top: 256px;">
                    <i class="fa fa-envelope"></i>
                    <span>Mail</span>
                </a>
                <a class="start-screen__tile masonry-item" href="#" style="position: absolute; left: 256px; top: 256px;">
                </a>
                <a class="start-screen__tile masonry-item" href="#" style="position: absolute; left: 384px; top: 256px;">
                </a>
                <a class="start-screen__tile masonry-item" href="#" style="position: absolute; left: 256px; top: 384px;">
                </a>
                </div>
                </div> -->
            </div>
                <div id="main" class="bg-rotator">
                    <div class="layer a"></div>
                    <div class="layer b"></div>
                    <div class="main_cover" id="window_main">
                        
                        
                    </div>
                </div>
                <div class="proccess_window_bar">
                    <!-- <div class="window_search_cover">
                        <i class="bi bi-search" id="window_search_i"></i>
                        <input type="text" placeholder="검색" id="window-search">
                    </div> -->
                    <div class="window_proccess_start">
                        <i class="bi bi-windows"></i>
                    </div>
                    <div id="window_proccess_list">

                    </div>
                    
                </div>
                <div id="pointer_box"></div>

                <!-- <div class="skills">
                    <div class="backs">
                        <div class="backs_cover">
                            <p>클릭하여 자세히 보기!</p>
                        </div>
                    </div>
                    <iframe src="../lib/AlpaProgress/AlpaProgress.html"
                        class="viewer"
                        sandbox="allow-same-origin allow-scripts"
                        style="width:100%;height:100%;border:0"></iframe>
                </div> -->

            </div>
        </div>
    </section>
</div>

</body>
<script>

    
    function logout(){
        deleteCookie("login");
        window.location.href = "/";
    }
    // 로그인 쿠키 확인
    const loginCookie = getCookie("login");

    // Base64 디코딩 후 "success" 여부 확인
    if (!loginCookie || atob(loginCookie) !== "success") {
        window.location.href = "/";
    }

    


    // ====== 사용 ======
    const fileList = [
        {idx:1,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "1.좌석 설계.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/theater.mp4", ico: null },
        {idx:2,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "2.공연 등록.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/product.mp4", ico: null },
        {idx:3,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "3.구매.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/buy.mp4", ico: null },
        {idx:4,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "4.게시판.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/notice.mp4",ico: null },

        {idx:5,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "1.기획 및 의도.pdf", type: "file", ext: ".pdf", realPath: "/files/기획의도.html", ico: null },
        {idx:6,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "2.요구사항 분석.pdf", type: "file", ext: ".pdf", realPath: "/files/요구사항분석.html", ico: null },
        {idx:7,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "3.데이터 베이스 설계.pdf", type: "file", ext: ".pdf", realPath: "/files/데이터베이스-설계.html", ico: null },
        {idx:8,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "4.화면 설계.pdf", type: "file", ext: ".pdf", realPath: "/files/화면설계.html", ico: null },
        {idx:9,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "5.소프트 웨어 설계.pdf", type: "file", ext: ".pdf", realPath: "/files/소프트웨어-설계.html",ico: null },
        {idx:10,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "6.소스 코드.pdf", type: "file", ext: ".pdf", realPath: "/files/소스코드.html", ico: null },
        {idx:11,pk:0, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "7.테스트.pdf", type: "file", ext: ".pdf", realPath: "/files/테스트.html", ico: null },
        
        {idx:12,pk:0, path: "D:\\윈도우 응용프로그램\\아두이노 코드 자동설계 프로그램", name: "시연.mp4", type: "file", ext: ".youtube", realPath: "https://www.youtube.com/embed/HN8kXCf19us?autoplay=1",ico: null },
        {idx:13,pk:0, path: "D:\\윈도우 응용프로그램\\작업스케줄러", name: "시연.mp4", type: "file", ext: ".youtube", realPath: "https://www.youtube.com/embed/RteyPM53eYc?autoplay=1",ico: null },
        {idx:14,pk:0, path: "C:\\기술", name: "기술.exe", type: "file", ext: ".exe", realPath: "/lib/AlpaProgress/AlpaProgress.html", ico: `<span class="i_cover exe" style="background-color: #5C6BC0;"><i class="bi bi-bar-chart-line-fill"></i></span>` },
        {idx:15,pk:0, path: "D:\\웹 개발", name: "기획서.exe", type: "file", ext: ".exe", realPath: "/lib/AlpaTheater/AlpaTheater.html", ico: `<span class="i_cover exe"><i class="bi bi-card-checklist"></i></span>` },
        {idx:16,pk:0, path: "D:\\이력서", name: "이력서.pdf", type: "file", ext: ".pdf", realPath: "/download/장윤수 이력서.pdf", ico: null },
        
        {idx:17,pk:0, path: "C:\\Users\\바탕화면", name: "파일탐색기", type: "folder", ext: "folder", realPath: "D:", ico: null ,order : {x : 1, y:1}},
        {idx:18,pk:14, path: "C:\\Users\\바탕화면", name: "기술.exe", type: "file", ext: ".exe", realPath: "/lib/AlpaProgress/AlpaProgress.html", ico: `<span class="i_cover exe" style="background-color: #5C6BC0;"><i class="bi bi-bar-chart-line-fill"></i></span>`,order : {x : 1, y:2} },
        {idx:19,pk:15, path: "C:\\Users\\바탕화면", name: "기획서.exe", type: "file", ext: ".exe", realPath: "/lib/AlpaTheater/AlpaTheater.html", ico: `<span class="i_cover exe"><i class="bi bi-card-checklist"></i></span>`,order : {x : 1, y:3} },
        {idx:20,pk:16, path: "C:\\Users\\바탕화면", name: "이력서.pdf", type: "file", ext: ".pdf", realPath: "/download/장윤수 이력서.pdf", ico: null,order : {x : 1, y:4} },
    ];
    const mainList = {
        desktop : {
            target : "#window_main",
        },
        disk : [...fileList]
    }


    const manager = new AlpaProcessManager({ fileList });

    const desktop = new AlpaDesktop({
        target: mainList.desktop.target,
        manager,
        disk: mainList.disk,
        desktopPath: "C:\\Users\\바탕화면",
        onReorder: ({ idx, order }) => {
            console.log(idx, order);
            // const db = JSON.parse(localStorage.getItem('desktopOrder') || '{}');
            // db[idx] = order;
            // localStorage.setItem('desktopOrder', JSON.stringify(db));
        }
    });
    desktop.render();
    //window.addEventListener("message", viewSkill);


    $(window).on("load",()=>{
        manager.runProccessIdx(15);
        manager.runProccessIdx(14);


        let html = "";
        const seen = new Set();
        fileList.forEach(e => {
        if (e.ext === ".exe") {
            const uniqKey = (e.pk && e.pk > 0) ? e.pk : e.idx;

            if (seen.has(uniqKey)) return; // 이미 추가한 exe는 스킵
            seen.add(uniqKey);

            html += `
            <li data-idx=${uniqKey}>
                <a href="#">
                ${e.ico ?? '<i class="bi bi-terminal-fill"></i>'}
                ${e.name.split(".")[0] ?? e.name}
                </a>
            </li>
            `;
        }
        });
        $("#file_recent").html(html);
        
        $("#file_recent li").click((e)=>{
            const idx = Number($(e.currentTarget).attr("data-idx"));
            manager.runProccessIdx(idx);
            $(".start-menu").removeClass("active");
            $(".window_proccess_start").removeClass("active");
        });
    })


    // function viewSkill(){
    //     manager.runProccessIdx(14);
        
        
    //     $(".skills").hide(300);

    //     try{
    //         manager.win?.onClose(()=>$(".skills").show(300));
    //     }catch(e){
            
    //     }
    // }


    $(".window_proccess_start").on("click",()=>{
        $(".start-menu").toggleClass("active");
        $(".window_proccess_start").toggleClass("active");
    });

    $("body").on("mousedown", (e)=>{
        let targets = e.target;
        if(!targets.closest(".start-menu") && !targets.closest(".window_proccess_start")){
            $(".start-menu").removeClass("active");
            $(".window_proccess_start").removeClass("active");
        }
    });
    
    
</script>
</html>
