<!DOCTYPE html>
<html>
<head>
    <title>장윤수portfolio</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <!-- <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <!-- <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> -->
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <script src="../js/script.js"></script>
    <!-- <script src="./proccess.js"></script> -->
    <script src="./deskTop.js"></script>
    <script src="../lib/AlpaProgress/js/AlpaProgress.js"></script>
</head>
<style>

.bg-rotator{
  position:relative; width:100%; height:60vh; /* 필요크기 */
  overflow:hidden; background:#000;
}
.bg-rotator .layer{
  position:absolute; inset:0;
  background-position:center;
  background-size:cover;
  background-repeat:no-repeat;
  z-index:-1;
  opacity:0; transition:opacity 800ms ease; /* JS의 FADE와 맞추기 */
}
</style>
<body>
<div class="wrapper">
    <section>
        <div class="container">
            <div class="container_inner">
                <div id="main" class="bg-rotator">
                    <div class="layer a"></div>
                    <div class="layer b"></div>
                    <div class="main_cover" id="window_main">
                        
                        
                    </div>
                </div>
                <div class="proccess_window_bar">
                    <div class="window_search_cover">
                        <i class="bi bi-search" id="window_search_i"></i>
                        <input type="text" placeholder="검색" id="window-search">
                    </div>
                    <div id="window_proccess_list">

                    </div>
                    <div class="power" title="로그아웃" onclick="logout()">
                        <i class="bi bi-power"></i>
                    </div>
                </div>
                <div id="pointer_box"></div>

                <div class="skills">
                <iframe src="../lib/AlpaProgress/AlpaProgress.html"
                        class="viewer"
                        sandbox="allow-same-origin allow-scripts"
                        style="width:100%;height:100%;border:0"></iframe>
                </div>

            </div>
        </div>
    </section>
</div>

</body>
<script>

    
    function logout(){
        deleteCookie("login");
        window.location.href = "/";
    }
    // 로그인 쿠키 확인
    const loginCookie = getCookie("login");

    // Base64 디코딩 후 "success" 여부 확인
    if (!loginCookie || atob(loginCookie) !== "success") {
        window.location.href = "/";
    }

    


    // ====== 사용 ======
    const mainList = [
        { pk:0, txt:"웹개발", url:"D:\\웹 개발", ext:"folder" },
        { pk:0, txt:"윈도우 응용 프로그램", url:"D:\\윈도우 응용프로그램", ext:"folder" },
        { pk:5, txt:"이력서", url:"D:\\이력서\\장윤수 이력서.pdf", ext:".pdf", realPath:"/download/장윤수 이력서.pdf" }
    ];
    const fileList = [
        {idx:1, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "1.좌석 설계.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/theater.mp4", ico: null },
        {idx:2, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "2.공연 등록.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/product.mp4", ico: null },
        {idx:3, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "3.구매.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/buy.mp4", ico: null },
        {idx:4, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\시연영상", name: "4.게시판.mp4", type: "file", ext: ".mp4", realPath: "/video/웹/극장/notice.mp4",ico: null },

        {idx:5, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "1.기획 및 의도.pdf", type: "file", ext: ".pdf", realPath: "/files/기획의도.html", ico: null },
        {idx:6, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "2.요구사항 분석.pdf", type: "file", ext: ".pdf", realPath: "/files/요구사항분석.html", ico: null },
        {idx:7, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "3.데이터 베이스 설계.pdf", type: "file", ext: ".pdf", realPath: "/files/데이터베이스-설계.html", ico: null },
        {idx:8, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "4.화면 설계.pdf", type: "file", ext: ".pdf", realPath: "/files/화면설계.html", ico: null },
        {idx:9, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "5.소프트 웨어 설계.pdf", type: "file", ext: ".pdf", realPath: "/files/소프트웨어-설계.html",ico: null },
        {idx:10, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "6.소스 코드.pdf", type: "file", ext: ".pdf", realPath: "/files/소스코드.html", ico: null },
        {idx:11, path: "D:\\웹 개발\\극장 티켓팅 프로젝트\\기획서", name: "7.테스트.pdf", type: "file", ext: ".pdf", realPath: "/files/테스트.html", ico: null },
        
        {idx:12, path: "D:\\윈도우 응용프로그램\\아두이노 코드 자동설계 프로그램", name: "시연.mp4", type: "file", ext: ".youtube", realPath: "https://www.youtube.com/embed/HN8kXCf19us?autoplay=1",ico: null },
    	{idx:13, path: "D:\\윈도우 응용프로그램\\작업스케줄러", name: "시연.mp4", type: "file", ext: ".youtube", realPath: "https://www.youtube.com/embed/RteyPM53eYc?autoplay=1",ico: null },
        {idx:14, path: "C:\\Alpa프로그래스", name: "Progress.exe", type: "file", ext: ".exe", realPath: "../lib/AlpaProgress/AlpaProgress.html", ico: null },
    ];


    const manager = new AlpaProcessManager({ fileList });
    const desktop = new AlpaDesktop({ target:"#window_main", mainList, manager });
    desktop.render();
    window.addEventListener("message", viewSkill);


    function viewSkill(){
        manager.runProccessIdx(14);
        
        
        $(".skills").hide(300);

        try{
            manager.win?.onClose(()=>$(".skills").show(300));
        }catch(e){
            
        }
    }


    const IMAGES = [
    '/images/bottom4.jpg',
    '/images/bottom5.jpg',
    '/images/bottom6.jpg',
    '/images/bottom7.jpg',
    ];

    const INTERVAL = 4000;  // 교체 간격(ms)
    const FADE = 800;       // 페이드 시간(ms)

    const main = document.querySelector('#main');
    const [layerA, layerB] = main.querySelectorAll('.layer');
    let idx = 0, usingA = true;

    // 사전 로딩
    IMAGES.forEach(src => { const img = new Image(); img.src = src; });

    function setBg(el, url) {
    el.style.backgroundImage = `url("${url}")`;
    }

    function rotate() {
    const next = IMAGES[idx % IMAGES.length];
    if (usingA) {
        setBg(layerB, next);
        layerB.style.opacity = '1';
        layerA.style.opacity = '0';
    } else {
        setBg(layerA, next);
        layerA.style.opacity = '1';
        layerB.style.opacity = '0';
    }
    usingA = !usingA;
    idx++;
    }

    setBg(layerA, IMAGES[0]);
    layerA.style.opacity = '1';

    setInterval(rotate, INTERVAL);
</script>
</html>
